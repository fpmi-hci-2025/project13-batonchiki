# PharmacyOnline — веб и мобильное приложение для аптеки

**Полное руководство, документация и описание проекта**

---

## Краткое описание

PharmacyOnline — это решение для управления аптечной торговлей и обслуживания клиентов. Проект включает:

* **Веб-приложение (админ-панель, курьерская логистика, B2B-интеграции)** для сотрудников аптеки, менеджеров и партнёров.
* **Мобильное приложение (iOS и Android)** для конечных пользователей (покупателей) с удобным поиском, покупкой, доставкой и историей заказов.

Проект ориентирован на средние и крупные аптечные сети, поддерживает многофилиальность, онлайн-оплату, и соблюдение требований по хранению персональных данных.

---

## Цели проекта

1. Обеспечить удобный интерфейс для покупателей: поиск по наименованию и действующему веществу, фильтры, сравнение цен.
2. Автоматизировать процесс обработки заказов: приём, сбор, упаковка, передача курьеру, отслеживание статуса.
3. Управление ассортиментом и остатками в режимах реального времени.
4. Поддержка промо-кампаний, скидок по картам лояльности и бонусных программ.
5. Интеграция с внешними сервисами (оплата, курьеры, аналитика).

---

## Функциональные возможности

### Для клиентов (мобильное приложение + веб — клиентская часть)

* Регистрация и авторизация (email, телефон, OAuth через Google/Apple).
* Поиск по каталогу, фильтры (категория, цена, наличие, фармакологическая группа).
* Карточка товара: описание, инструкция, противопоказания, аналоги, отзывы.
* Корзина и быстрый заказ.
* Опции доставки: самовывоз, курьерская доставка (различные тарифы), пункты выдачи.
* Оплата: карта, Apple/Google Pay, онлайн-кошелёк, оплата при получении (по настройке).
* История заказов, трекинг в реальном времени.
* Программа лояльности и промокоды.
* Система уведомлений (push, email, SMS).

### Для сотрудников (веб-приложение — админ/оператор)

* Портал менеджера: панель KPI, аналитика продаж, управление товарами.
* Обработка заказов: приём, изменение статусов, возвраты.
* Управление остатками и поставками.
* Работа с поставщиками и закупками.
* Управление скидками и промо-акциями.
* Роли и права доступа (администратор, оператор, бухгалтер, курьерный диспетчер).


---

## Архитектура системы (высокоуровнево)

```
[Mobile Apps (iOS/Android)] <---> API Gateway <---> Backend Services (REST/GraphQL)
                                         |-- Auth Service (OAuth, JWT)
                                         |-- Catalog Service
                                         |-- Orders Service
                                         |-- Inventory Service
                                         |-- Payments Service
                                         |-- Notifications Service
                                         `-- Admin Service

Дополнительно:
- БД (PostgreSQL / Redis)
- Очереди (RabbitMQ / Kafka)
- Объектное хранилище (S3 совместимое)
- CI/CD (GitHub Actions / GitLab CI)
- Мониторинг (Prometheus / Grafana)
```

---

## Технологический стек

**Frontend (веб):** React, TypeScript, Redux/RTK, React Router, Tailwind CSS.

**Mobile:** Flutter.

**Backend:** Python, FastAPI; REST.

**DB:** PostgreSQL (основная), Redis (кеширование, сессии).

**Инфраструктура:** Docker, Kubernetes (k8s), Terraform (инфраструктура как код).

**CI/CD:** GitHub Actions.

**Мониторинг и логирование:** Prometheus + Grafana; ELK.

**SMS/Email/Push:** Mailgun.

---

## Документация API

* Поддержка OpenAPI (Swagger) для REST. Ссылка на спецификацию: `/api/docs`.
* Примеры эндпоинтов:

  * `POST /auth/login` — вход (возвращает JWT)
  * `GET /catalog/products` — поиск и фильтрация
  * `GET /products/{id}` — карточка товара
  * `POST /orders` — создание заказа
  * `PATCH /orders/{id}/status` — изменение статуса

---

## Модель данных

* **User**: id, name, email, phone, role, loyalty_points
* **Product**: id, sku, name, description, ingredients, contraindications, price, manufacturer, barcode, images[], attributes[], categories[]
* **Inventory**: product_id, store_id, quantity, reserved
* **Store**: id, name, address, working_hours, contact
* **Order**: id, user_id, items[], total, status, payment_info, delivery_info, created_at
* **Payment**: id, order_id, provider, status, transaction_id
